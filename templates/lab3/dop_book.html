{% extends "base.html" %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='lab3/dop_book.css') }}">
{% endblock %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
    <h1>Поиск книг по цене</h1>
    
    <form method="POST" class="search-form">
        <div class="price-inputs">
            <div class="input-group">
                <label for="min_price">Минимальная цена:</label>
                <input type="number" id="min_price" name="min_price" 
                       value="{{ min_price }}" 
                       placeholder="{{ '%.2f'|format(min_price_all) }}" 
                       min="0" step="0.01">
            </div>
            
            <div class="input-group">
                <label for="max_price">Максимальная цена:</label>
                <input type="number" id="max_price" name="max_price" 
                       value="{{ max_price }}" 
                       placeholder="{{ '%.2f'|format(max_price_all) }}" 
                       min="0" step="0.01">
            </div>
        </div>
        
        <div class="actions">
            <button type="submit" name="search" class="btn btn-primary">Искать</button>
            <button type="submit" name="reset" class="btn btn-secondary">Сброс</button>
        </div>
    </form>

    <div class="results-info">
        {% if count == 1 %}
            Найдена 1 книга
        {% elif 2 <= count <= 4 %}
            Найдено {{ count }} книги
        {% else %}
            Найдено {{ count }} книг
        {% endif %}
    </div>

    {% if count == 0 %}
        <div class="no-results">
            Не найдено ни одной книги по заданным критериям
        </div>
    {% else %}
        <div class="books-grid">
            {% for book in books %}
            <div class="book-card">
                <h3 class="book-title">{{ book.title }}</h3>
                <p class="book-author">{{ book.author }}</p>
                <p class="book-genre">{{ book.genre }}</p>
                <p class="book-pages">{{ book.pages }} стр.</p>
                <p class="book-price">{{ book.price }} руб.</p>
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <br>
    <a href="/lab3/">Меню</a>
{% endblock %}